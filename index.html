<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Oil Token (OIL) - Official Site</title>
<style>
:root{
  --bg:#ffffff;
  --card-radius:14px;
  --gap:14px;
  --gold:linear-gradient(135deg,#ffd700,#ffa500);
  --blue:linear-gradient(135deg,#00c6ff,#0072ff);
  --pink:linear-gradient(135deg,#ff5f6d,#ffc371);
  --purple:linear-gradient(135deg,#7f00ff,#e100ff);
  --red:linear-gradient(135deg,#ff4b2b,#ff416c);
  --green:linear-gradient(135deg,#00b09b,#96c93d);
  --silver:linear-gradient(135deg,#c0c0c0,#f0f0f0);
  --neon:linear-gradient(135deg,#39ff14,#0ff);
}
html,body{height:100%;margin:0;font-family:Poppins,system-ui,Arial; background:var(--bg); color:#111}
.container{max-width:1200px;margin:14px auto;padding:10px}
.top-row{display:flex;gap:var(--gap);flex-wrap:wrap}
.top-card{flex:1;min-width:260px;border-radius:18px;padding:18px;color:#fff;box-shadow:0 6px 20px rgba(0,0,0,.08)}
nav a{display:inline-block;margin:6px 8px;padding:8px 14px;background:rgba(255,255,255,.12);color:#fff;text-decoration:none;border-radius:10px;font-weight:700}
nav a:hover{background:rgba(255,255,255,.22)}
.main-layout{display:grid;grid-template-columns:1fr 2fr 1fr;gap:var(--gap);margin-top:18px}
.left-col,.right-col{display:flex;flex-direction:column;gap:var(--gap)}
.square-card{height:160px;border-radius:var(--card-radius);display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;font-weight:800;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,.06)}
.rect-card{border-radius:var(--card-radius);padding:20px;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,.06)}
.btn{display:inline-block;background:#fff;color:#111;padding:8px 14px;border-radius:14px;text-decoration:none;font-weight:700;margin:8px}
.chat-container{margin-top:20px;padding:10px;border-radius:14px;background:#f5f5f5;border:1px solid #ddd}
.chat-box{height:200px;overflow-y:auto;padding:8px;border:1px solid #ccc;border-radius:10px;background:#fff;margin-bottom:10px}
.chat-message{padding:6px 10px;margin:4px 0;border-radius:8px;background:#eee}
.chat-message.private{background:#cce5ff}
input,textarea{width:90%;padding:10px;border-radius:10px;border:1px solid #ddd;margin:8px 0;font-size:14px}
button.action{padding:10px 14px;border-radius:10px;border:none;background:#111;color:#fff;cursor:pointer}
footer{margin-top:18px;padding:20px;background:#111;color:#fff;border-radius:12px}
@media(max-width:900px){ .main-layout{grid-template-columns:1fr;} .top-row{flex-direction:column} .left-col,.right-col{flex-direction:row;overflow:auto} .square-card{min-width:200px} }
</style>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCGDY_ij0EjS-RDSXF0RQCyoc6yYLXyPXE",
  authDomain: "oilgram.firebaseapp.com",
  projectId: "oilgram",
  storageBucket: "oilgram.firebasestorage.app",
  messagingSenderId: "555429946689",
  appId: "1:555429946689:web:a23a918ca6ceb3e8936dc0",
  measurementId: "G-BSEWJHYD29"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

let loginSection, chatSection, emailInput, passInput, loginBtn, logoutBtn;
let publicChatBox, privateChatBox, publicMsgInput, privateMsgInput, sendPublicBtn, sendPrivateBtn;
let selectedUser = null;

window.addEventListener('DOMContentLoaded',()=>{
  loginSection = document.getElementById('loginSection');
  chatSection = document.getElementById('chatSection');
  emailInput = document.getElementById('email');
  passInput = document.getElementById('password');
  loginBtn = document.getElementById('loginBtn');
  logoutBtn = document.getElementById('logoutBtn');

  publicChatBox = document.getElementById('publicChatBox');
  privateChatBox = document.getElementById('privateChatBox');
  publicMsgInput = document.getElementById('publicMsg');
  privateMsgInput = document.getElementById('privateMsg');
  sendPublicBtn = document.getElementById('sendPublic');
  sendPrivateBtn = document.getElementById('sendPrivate');

  loginBtn.addEventListener('click',loginUser);
  logoutBtn.addEventListener('click',logoutUser);
  sendPublicBtn.addEventListener('click',sendPublicMessage);
  sendPrivateBtn.addEventListener('click',sendPrivateMessage);

  onAuthStateChanged(auth,user=>{
    if(user){
      loginSection.style.display='none';
      chatSection.style.display='block';
      loadPublicChat();
      loadPrivateChat(user.email);
    } else {
      loginSection.style.display='block';
      chatSection.style.display='none';
    }
  });
});

async function loginUser(){
  const email=emailInput.value.trim();
  const pass=passInput.value.trim();
  if(!email||!pass){ alert("Enter email and password"); return; }
  try{
    await signInWithEmailAndPassword(auth,email,pass);
  }catch(e){
    if(e.code==="auth/user-not-found"){
      try{ await createUserWithEmailAndPassword(auth,email,pass); }
      catch(err){ alert(err.message); }
    } else alert(e.message);
  }
}

function logoutUser(){ signOut(auth); }

async function sendPublicMessage(){
  const msg=publicMsgInput.value.trim();
  if(!msg) return;
  const user = auth.currentUser;
  await addDoc(collection(db,'publicMessages'),{email:user.email,message:msg,ts:new Date()});
  publicMsgInput.value='';
}

async function sendPrivateMessage(){
  const msg=privateMsgInput.value.trim();
  if(!msg||!selectedUser){ alert("Select a user for private chat"); return; }
  const user = auth.currentUser;
  await addDoc(collection(db,'privateMessages'),{
    from:user.email,
    to:selectedUser,
    message:msg,
    ts:new Date()
  });
  privateMsgInput.value='';
}

function loadPublicChat(){
  const q=query(collection(db,'publicMessages'),orderBy('ts','asc'));
  onSnapshot(q,snap=>{
    publicChatBox.innerHTML='';
    snap.forEach(doc=>{
      const d=doc.data();
      const div=document.createElement('div');
      div.className='chat-message';
      div.textContent=`${d.email}: ${d.message}`;
      publicChatBox.appendChild(div);
      publicChatBox.scrollTop=publicChatBox.scrollHeight;
    });
  });
}

function loadPrivateChat(email){
  const q=query(collection(db,'privateMessages'),orderBy('ts','asc'));
  onSnapshot(q,snap=>{
    privateChatBox.innerHTML='';
    snap.forEach(doc=>{
      const d=doc.data();
      if(d.from===email || d.to===email){
        const div=document.createElement('div');
        div.className='chat-message private';
        div.textContent=`${d.from} â†’ ${d.to}: ${d.message}`;
        privateChatBox.appendChild(div);
        privateChatBox.scrollTop=privateChatBox.scrollHeight;
      }
    });
  });
}
</script>
</head>
<body>
<div class="container">

<!-- TOP ROW -->
<div class="top-row">
  <div class="top-card" style="background:var(--purple)">
    <h3>Explore</h3>
    <nav>
      <a href="WhitePaper.html">WhitePaper</a>
      <a href="Roadmap.html">Roadmap</a>
      <a href="Tokenomics.html">Tokenomics</a>
      <a href="Team.html">Team</a>
      <a href="Description.html">Description</a>
    </nav>
  </div>

  <div class="top-card" style="background:var(--blue)">
    <h2>Welcome to Oil Token</h2>
    <p>The future of decentralized oil-backed digital assets.</p>
  </div>

  <div class="top-card" style="background:var(--gold)">
    <h2>OILtoken EXCHANGE</h2>
    <p>Coming Soon</p>
  </div>
</div>

<!-- MAIN LAYOUT -->
<div class="main-layout">
  <!-- LEFT COLUMN -->
  <div class="left-col">
    <div class="square-card" style="background:var(--gold)">Crypto TV</div>
    <div class="square-card" style="background:var(--blue)">Bloomberg TV</div>
    <div class="square-card" style="background:var(--purple)">Oil Market News</div>
    <div class="square-card" style="background:var(--red)">Rewards</div>
  </div>

  <!-- MIDDLE COLUMN -->
  <div class="middle-col">
    <div class="rect-card" style="background:var(--pink)">
      <h3>Global Crypto News</h3>
    </div>
    <div class="rect-card" style="background:var(--blue)">
      <h3>Oiltoken News</h3>
      <video width="100%" autoplay muted loop playsinline style="border-radius:10px;">
        <source src="https://cdn.pixabay.com/video/2017/10/30/12746-239984944_tiny.mp4" type="video/mp4">
      </video>
    </div>
  </div>

  <!-- RIGHT COLUMN -->
  <div class="right-col">
    <div class="square-card" style="background:var(--pink)">
      Telegram: <a href="https://t.me/oilofficial" target="_blank">t.me/oilofficial</a>
    </div>
    <div class="square-card" style="background:var(--green)">
      Admin Panel
    </div>
  </div>
</div>

<!-- CHAT SECTION -->
<div id="loginSection" class="chat-container">
  <h3>Login / Register (Email)</h3>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button class="action" id="loginBtn">Login / Register</button>
</div>

<div id="chatSection" class="chat-container" style="display:none">
  <h3>Public Chat</h3>
  <div class="chat-box" id="publicChatBox"></div>
  <input type="text" id="publicMsg" placeholder="Type a message">
  <button class="action" id="sendPublic">Send</button>

  <h3>Private Chat</h3>
  <input type="email" id="privateUser" placeholder="Recipient email" oninput="selectedUser=this.value">
  <div class="chat-box" id="privateChatBox"></div>
  <input type="text" id="privateMsg" placeholder="Type a private message">
  <button class="action" id="sendPrivate">Send Private</button>

  <button class="action" id="logoutBtn" style="margin-top:10px;background:#c0392b">Logout</button>
</div>

</div>
</body>
</html>
